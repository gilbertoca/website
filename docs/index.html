<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8"/>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Konik User Documentation describing how to integrate the Konik Library into a software project."/>
    <meta name="author" content="Vadim Bauer"/>
    <meta content="/img/logo.png" property="og:image"/>
    <meta name="keywords" content="Konik User Guide, Konik manual, Konik HowTo, Konik API, Konik JavaDocs, Konik JavaDoc"/>
    <meta name="date" content='2014-10-08' scheme="YYYY-MM-DD">
	<meta name="author" content="Vadim Bauer">
    
	
    <title>Konik User Documentation</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cosmo/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" type="text/css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/styles/obsidian.min.css" type="text/css"/>
    <link rel="stylesheet" href="/css/obsidian.css" type="text/css"/>
    <link rel="stylesheet" href="/css/mb.css"  type="text/css"/>
	<link rel="stylesheet" href="/css/konik.css" type="text/css"/>

    <!-- JQuery at the top to use it in our code -->
    <script src="//cdn.jsdelivr.net/jquery/2.1.0/jquery.min.js"></script>

    <!-- icon -->
    <link href="/favicon.ico"  rel="konik.io icon"  type="image/x-icon"/>

    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-45977479-1', 'auto');
	  ga('require', 'displayfeatures');
	  ga('send', 'pageview');
	</script>

  </head>

  <body>	
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-main">
        <span class="sr-only"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand logo" href="/">Konik</a>
    </div>

    <div id="navbar-main" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/index.html#Quickstart">Schnellstart</a></li>
        <li><a href="/ZUGFeRD.html">ZUGFeRD</a></li>
        <li><a href="/docs/index.html">Dokumentation</a></li>
        <li><a href="/development.html">Entwicklung</a></li>
        <li><a href="/validation.html">Validation Service</a></li>
        <li><a href="/blog.html">Blog</a></li>
         <li><a href="/index.html#Support">Hilfe</a></li>
      </ul>
    </div><!-- /.navbar-collapse -->
    
  </div><!-- /.container -->
</nav>	
	<div class="section">
		<div class="container">
			<div class="page-header">
				<h1>Konik User Documentation</h1>
			</div>
			
			<div id="preamble">
<div class="sectionbody">
<div id="toc" class="col-lg-12">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_quick_start">Quick Start</a>
<ul class="sectlevel2">
<li><a href="#_creating_the_invoice_model">Creating the invoice model</a></li>
<li><a href="#_transforming_invoice_model_to_xml">Transforming invoice model to XML</a></li>
<li><a href="#_attaching_invoice_model_to_pdf">Attaching invoice model to PDF</a></li>
</ul>
</li>
<li><a href="#_setup">Setup</a>
<ul class="sectlevel2">
<li><a href="#_java_projects">Java Projects</a></li>
<li><a href="#_invoice_validator_option">Invoice Validator Option</a></li>
<li><a href="#__net_projects">.NET projects</a></li>
</ul>
</li>
<li><a href="#_javadoc_api_documentation">JavaDoc API Documentation</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1 col-lg-12">
<h2 id="_quick_start">Quick Start</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The example code from
<a href="https://github.com/konik-io/konik/blob/konik-0.8.1/src/test/java/io/konik/examples/MinimalInvoice.java#L72">MinimalInvoice.java</a>
represents a valid basic invoice and the steps on how to convert and attach an invoice to a PDF.</p>
</div>
<div class="paragraph">
<p>Let us step through the code and take a look at the interesting parts.</p>
</div>
<div class="sect2">
<h3 id="_creating_the_invoice_model">Creating the invoice model</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">private Invoice createMinimalInvoiceModel() {

   Invoice invoice = new Invoice(BASIC);    <i class="conum" data-value="1"></i><b>(1)</b>
   invoice.setHeader(new Header()
      .setInvoiceNumber("20131122-42")
      .setCode(_380)
      .setIssued(today)
      .setName("Rechnung"));

   Trade trade = new Trade();
   trade.setAgreement(new Agreement()     <i class="conum" data-value="2"></i><b>(2)</b>
         .setSeller(new TradeParty()
               .setName("Seller Inc.")
               .setAddress(new Address("80331", "Marienplatz 1", "München", DE))
               .addTaxRegistrations(new TaxRegistration("DE122...", FC)))
         .setBuyer(new TradeParty()
               .setName("Buyer Inc.")
               .setAddress(new Address("50667", "Domkloster 4", "Köln", DE))
               .addTaxRegistrations(new TaxRegistration("DE123...", FC))));

   trade.setDelivery(new Delivery(nextMonth));

   trade.setSettlement(new Settlement()
         .setPaymentReference("20131122-42")
         .setCurrency(EUR)
         .addPaymentMeans(new PaymentMeans()
            .setPayerAccount(new FinancialAccount("DE01234.."))
               .setPayerInstitution(new FinancialInstitution("GENO...")))
         .setMonetarySummation(new MonetarySummation()
            .setLineTotal(new Amount(100, EUR))
            .setTaxTotal(new Amount(19, EUR))
            .setGrandTotal(new Amount(119, EUR))));

   trade.addItem(new Item()
      .setProduct(new Product().setName("Saddle"))
      .setDelivery(new SpecifiedDelivery(new Quantity(1, UNIT))));
   invoice.setTrade(trade);

   return invoice;
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A new invoice instance is created with one of the three allowed profiles. BASIC, COMPFORT or EXTENDED</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The implementation of the model as a fluent interface makes the creation of the invoice self-explanatory.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_transforming_invoice_model_to_xml">Transforming invoice model to XML</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public void createXmlFromModel(Invoice invoice) throws IOException {
   InvoiceTransformer transformer = new InvoiceTransformer();     <i class="conum" data-value="1"></i><b>(1)</b>
   FileOutputStream outputStream = new FileOutputStream("target/minimal-invoice.xml");
   transformer.fromModel(invoice, outputStream);      <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The InvoiceTransformer is responsible for transforming XML to Model and vice versa.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Transform from invoice to an OutputStream.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_attaching_invoice_model_to_pdf">Attaching invoice model to PDF</h3>
<div class="paragraph">
<p>This alternative step performs a model conversation. So you don&#8217;t have to do it yourself.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">public void creatInvoiceAndAttachToPDF() throws IOException {
   Invoice invoice = createMinimalInvoiceModel();
   PdfHandler handler = new PdfHandler();    <i class="conum" data-value="1"></i><b>(1)</b>
   InputStream inputPdf = getClass().getResourceAsStream("/acme_invoice-42.pdf");
   OutputStream resultingPdf = new FileOutputStream("target/acme_invoice-42_ZUGFeRD.pdf");
   handler.appendInvoice(invoice, inputPdf, resultingPdf);     <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a new PdfHandler or reuse existing.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Append Invoice to existing PDF defined in inputPdf the result will be written to resultingPdf.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1 col-lg-12">
<h2 id="_setup">Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>or how to integrate the Konik library into my project.</p>
</div>
<div class="paragraph">
<p>Broadly there are two different ways on how to
integrate the Konik library into a project.
Both ways mostly depend upon the type of the environment
of the application and the Invoice Validator implementation.</p>
</div>
<div class="paragraph">
<p>Friends of .NET have only one option to choose from.</p>
</div>
<div class="sect2">
<h3 id="_java_projects">Java Projects</h3>
<div class="paragraph">
<p>The minimal requirement for Konik is Java 6 although we recommend
Java 7 and above because of newer JaxB libraries.
The <a href="#_working_with_java_6">Working with Java 6</a> section contains instructions
on how Java 6 users can overcome these issues.</p>
</div>
<div class="paragraph">
<p>The Konik Library supports Bean Injections, also
known as JSR330 or CDI. This means that Konik fits nicely
in environments with Dependency Injection support.
The default option for Konik is to use Java
<a href="http://docs.oracle.com/javase/tutorial/ext/basics/spi.html">Service provider interface (SPI)</a>.</p>
</div>
<div class="sect3">
<h4 id="_jee_environment">JEE Environment</h4>
<div class="paragraph">
<p>If your environment is JEE6 and above include just</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.konik&lt;/groupId&gt;
    &lt;artifactId&gt;konik&lt;/artifactId&gt;
    &lt;version&gt;0.8.1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.konik&lt;/groupId&gt;
    &lt;artifactId&gt;pdfbox-carriage&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;version&gt;0.8.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Alternatively a different PDF carriage can be selected.
Make sure there is only one PDF carriage on the classpath.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_spring">Spring</h4>
<div class="paragraph">
<p>Select the dependencies according to the
<a href="#_jee_environment">JEE Environment</a> description.
As Konik has an optional dependency to javax.inject also known as
JRS330 which takes not part of Spring by default see
<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-standard-annotations">use of JSR 330 Standard Annotations</a>
in Spring Documentation.</p>
</div>
<div class="paragraph">
<p>When using Spring you have to add javax.inject dependency
to your project, so Spring can use JSR330 annotated components.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;javax.inject&lt;/groupId&gt;
    &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;
    &lt;version&gt;1&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the next step instruct Spring to also scan for the Konik Library
components based on the package name preifix io.konik.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java"> @Configuration
 @ComponentScan(basePackages = "com.acme.app.xyz , io.konik")	<i class="conum" data-value="1"></i><b>(1)</b>
 public class SpringApplicationConfig  {
     ...
 }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring with Spring Annotation to scan for injectable
components in package io.konik. For alternative XML
Configuration refer to <a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-scanning-autodetection">Spring Documentation</a>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_java_standalone">Java standalone</h4>
<div class="paragraph">
<p>Working in a standalone Java project or any other environment
which is not JEE6+ or JSR330 compatible.</p>
</div>
<div class="paragraph">
<p>Followind dependecy is required</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.konik&lt;/groupId&gt;
    &lt;artifactId&gt;konik&lt;/artifactId&gt;
    &lt;version&gt;0.8.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;io.konik&lt;/groupId&gt;
    &lt;artifactId&gt;pdfbox-carriage&lt;/artifactId&gt; <i class="conum" data-value="1"></i><b>(1)</b>
    &lt;version&gt;0.8.2&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Different PDF carriage can be selected.
Make sure there is only one PDF carriage on the classpath.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Recommended for invoice validation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.bval&lt;/groupId&gt;
    &lt;artifactId&gt;bval-jsr303&lt;/artifactId&gt;
    &lt;version&gt;0.5&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_working_with_java_6">Working with Java 6</h4>
<div class="paragraph">
<p>We recommend Java 7 and above because of newer JaxB library
which does not contain namespace prefix issues. If you still need to
work with Java 6 we recommend to use the latest JaxB libraries.
While from the XML point of view this not a problem, other
XML implementations who will receive your invoice might still complain about it.</p>
</div>
<div class="paragraph">
<p>For Java 6 add the latest JaxB files to your project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependencies&gt;
   &lt;dependency&gt;
      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
      &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;
      &lt;version&gt;2.2.10-b140310.1920&lt;/version&gt;
   &lt;/dependency&gt;
   &lt;dependency&gt;
      &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;
      &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;
      &lt;version&gt;2.2.10&lt;/version&gt;
   &lt;/dependency&gt;
   &lt;dependency&gt;
      &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;
      &lt;artifactId&gt;jaxb-core&lt;/artifactId&gt;
      &lt;version&gt;2.2.10-b140310.1920&lt;/version&gt;
   &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_invoice_validator_option">Invoice Validator Option</h3>
<div class="paragraph">
<p>The second option to choose from is the {http://beanvalidation.org/}[Java Bean Validation] Provider.
With the support of Bean Validation you can verify the correctness
of your invoice prior transforming it to xml. Currently there two
Open Source Bean Validation Providers <a href="http://hibernate.org/validator">Hibernate Validator</a>
and <a href="http://bval.apache.org">Apache BVal</a>.</p>
</div>
<div class="paragraph">
<p>While Hibernate Validator is superior regarding features BVal has
less dependencies and is more compact, which makes it a perfect
companion for a standalone application.</p>
</div>
<div class="paragraph">
<p>See <a href="http://hibernate.org/validator/documentation/getting-started/" class="bare">http://hibernate.org/validator/documentation/getting-started/</a>
on what dependencies you might need in your environment.</p>
</div>
<div class="paragraph">
<p>For BVal just this dependency to your project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.apache.bval&lt;/groupId&gt;
    &lt;artifactId&gt;bval-jsr303&lt;/artifactId&gt;
    &lt;version&gt;0.5&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_references">References</h4>
<div class="paragraph">
<p>A Blog entry deals with the topic of
<a href="/blog.html#Dependency-Injection-with-the-Konik-library">Konik and dependeny injection</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="__net_projects">.NET projects</h3>
<div class="paragraph">
<p>The .NET package consists of Konik, PDFBox-carriage &amp; BVal for Invoice Validation.
Everything bundled together in one package available via NuGet.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">PM&gt; Install-Package konik-zugferd</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also browse the <a href="https://www.nuget.org/packages/konik-zugferd/">NuGet Konik package</a> for details.</p>
</div>
</div>
</div>
</div>
<div class="sect1 col-lg-12">
<h2 id="_javadoc_api_documentation">JavaDoc API Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We host the API Documentation for the last stable release.</p>
</div>
<div class="paragraph">
<p>API Documentation for latest release of Konik, PDFBox-carriage and iText-carriage.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="api/konik/">Konik 0.8.1</a></p>
</li>
<li>
<p><a href="api/pdfbox-carriage/">PDFBox-Carriage 0.8.2</a></p>
</li>
<li>
<p><a href="api/itext-carriage/">iText-Carriage 0.8.0</a></p>
</li>
</ul>
</div>
</div>
</div>
			
		</div>
	</div>


<div class="container">
   <footer>
      <div class="row">
         <div class="col-lg-12">
            <p class="pull-right">
               Copyright &copy; Konik.io 2014
<!--                | <a href="/en/index.html">English</a> -->
               | <a href="/legal-notice.html">Impressum</a> 
               | <a href="/license.html">Lizenz</a>
               | <a href="http://www.google.com/recaptcha/mailhide/d?k=01q8vnbfNmxk0T5DM_GteAAg==&amp;c=zwuGbJbE2eqJvqdTIykGHA=="
                  onclick="window.open('http://www.google.com/recaptcha/mailhide/d?k\07501q8vnbfNmxk0T5DM_GteAAg\75\75\46c\75zwuGbJbE2eqJvqdTIykGHA\75\075', '', 'toolbar=0,scrollbars=0,location=0,statusbar=0,menubar=0,resizable=0,width=500,height=300'); return false;"
                  title="Reveal the Email address">Kontakt</a> | Baked with <a href="http://jbake.org">JBake</a>
            </p>
         </div>
      </div>
   </footer>
</div>
<!-- /.container -->

<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/languages/java.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/languages/xml.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/languages/bash.min.js"></script>
<script src="//cdn.jsdelivr.net/headroomjs/0.7.0/headroom.min.js"></script>
<script src="//cdn.jsdelivr.net/headroomjs/0.7.0/jQuery.headroom.min.js"></script>
<script src="/js/konik.js"></script>
</body>

</html>